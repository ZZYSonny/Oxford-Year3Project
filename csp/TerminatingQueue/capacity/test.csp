include "../common.csp"
include "../correct.csp"
include "lin.csp"
include "queue.csp"

System1 = runWith(True,True,
  runP(enqueue(T1,A); dequeue(T1))
)
assert Linearizers({T1}) [T= System1

System2 = runWith(True,True,
  runP(enqueue(T1,A); dequeue(T1)) |||
  runP(enqueue(T2,B); dequeue(T2))
)
assert Linearizers({T1,T2}) [T= System2

System3 = runWith(True,True,
  runP(enqueue(T1,A); dequeue(T1)) |||
  runP(dequeue(T2); enqueue(T2,B))
)
assert Linearizers({T1,T2}) [T= System3

System4 = runWith(True,True,
  runP(enqueue(T1,A) |~| dequeue(T1)) |||
  runP(enqueue(T2,B) |~| dequeue(T2))
)
assert Linearizers({T1,T2}) [T= System4

System5 = runWith(True,True,
  runP(enqueue(T1,A) |~| dequeue(T1)) |||
  runP(enqueue(T2,B) |~| dequeue(T2)) |||
  runP(enqueue(T3,C) |~| dequeue(T2))
)
assert Linearizers({T1,T2,T3}) [T= System4
